<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>AR Always Front</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
      body {
        margin: 0;
        background-color: #000;
        overflow: hidden;
        font-family: sans-serif;
        color: white;
      }

      model-viewer {
        width: 100vw;
        height: 100vh;
        --poster-color: transparent;
      }

      .button-group {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 12px;
      }

      .ar-btn,
      .link-btn {
        padding: 10px 16px;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.1);
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.3);
        font-size: 16px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 6px;
        backdrop-filter: blur(8px);
        transition: background 0.3s;
      }

      .ar-btn:hover,
      .link-btn:hover {
        background: rgba(255, 255, 255, 0.3);
      }
    </style>
  </head>
  <body>
    <model-viewer
      id="mv"
      src="1M.glb"
      ios-src="1M.usdz"
      ar
      ar-modes="webxr quick-look"
      ar-scale="auto"
      camera-controls
      disable-pan
      alt="Model"
      shadow-intensity="1"
      exposure="1.1"
    ></model-viewer>

    <div class="button-group">
      <button class="ar-btn" id="customAR">üï∂Ô∏è Xem AR</button>
      <button class="link-btn" onclick="window.open('https://store.epicgames.com/vi', '_blank')">
        ‚ñ∂Ô∏è Gh√© ThƒÉm
      </button>
    </div>

    <script type="module">
      const mv = document.querySelector("#mv");
      const arBtn = document.querySelector("#customAR");

      // N√∫t "Xem AR"
      arBtn.addEventListener("click", () => mv.activateAR());

      // Khi v√†o AR, g·∫Øn object v√†o camera
      mv.addEventListener("ar-status", (event) => {
        if (event.detail.status === "session-started") {
          const camera = mv.scene.camera;
          const model = mv.model;

          // G·∫Øn model v√†o camera
          camera.add(model);

          // Lu√¥n ƒë·∫∑t model tr∆∞·ªõc camera 1m
          model.position.set(0, 0, -1);
          model.quaternion.set(0, 0, 0, 1);

          console.log("‚úÖ Model locked in front of camera");
        } else if (event.detail.status === "not-presenting") {
          // Tho√°t AR ‚Üí tr·∫£ model v·ªÅ scene
          mv.scene.add(mv.model);
          console.log("üîÑ Model detached from camera");
        }
      });
    </script>
  </body>
</html>
